<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intro</title>
    <link rel="stylesheet" href="intro.css">
    <style>
        .hidden {
            display: none;
        }
        .fade-in {
            animation: fadeIn 1s forwards; /* Aggiungi animazione di fade-in */
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
<div class="video-container">
    <video id="matchVideo" autoplay muted>
        <source src="/videos/trailer-homepage.mp4" type="video/mp4">
    </video>
    <div id="blackOverlay" class="overlay hidden visible"></div> <!-- Overlay nero -->

    <div class="logo-container hidden" id="logoContainer"> <!-- Contenitore per il logo -->
        <img id="logo" src="/images/logo.png" alt="Logo di Generation Sport"> <!-- Immagine del logo -->
    </div>

    <div class="buttons hidden" id="buttonContainer"> <!-- Contenitore dei bottoni iniziato come hidden -->
        <button onclick="location.href='/registra-squadre'">Scendi in campo</button>
        <button onclick="location.href='/archivio'">Archivio</button>
        <button onclick="location.href='/contatti'">Chi siamo</button>
    </div>

    <!-- Pulsante per saltare il video -->
    <button id="skipButton" onclick="skipVideo()">Salta Video</button>

</div>

<script>
    const video = document.getElementById('matchVideo');
    const skipButton = document.getElementById('skipButton');
    const blackOverlay = document.getElementById('blackOverlay');
    const logoContainer = document.getElementById('logoContainer');
    const buttonContainer = document.getElementById('buttonContainer');

    let hideTimeout;
    let canShow = false;
    let transitionStarted = false; // Per evitare che la transizione parta due volte

    // 1. Attiva la possibilitÃ  di mostrare il tasto dopo 5 secondi
    setTimeout(() => {
        canShow = true;
        showSkipButton();
    }, 5000);

    // 2. Funzione Mostra/Nascondi Tasto
    function showSkipButton() {
        if (!canShow || transitionStarted) return;

        skipButton.classList.add('visible');
        clearTimeout(hideTimeout);

        hideTimeout = setTimeout(() => {
            skipButton.classList.remove('visible');
        }, 3000);
    }

    // 3. Rilevamento movimento mouse
    document.addEventListener('mousemove', showSkipButton);

    // 4. Funzione SKIP (corretta)
    function skipVideo() {
        if (transitionStarted) return;

        // Fermiamo il video e nascondiamo subito il tasto skip
        video.pause();
        skipButton.classList.remove('visible');
        skipButton.style.display = 'none';

        // Avviamo la tua transizione originale
        showOverlayAndLogo();
    }

    // 5. Gestione fine naturale del video
    video.addEventListener('ended', () => {
        showOverlayAndLogo();
    });

    // 6. La tua sequenza originale di transizione
    function showOverlayAndLogo() {
        if (transitionStarted) return;
        transitionStarted = true;

        // Nascondi il tasto skip per sicurezza
        skipButton.classList.remove('visible');
        skipButton.style.display = 'none';

        // Appare l'overlay nero
        blackOverlay.classList.remove('hidden');
        blackOverlay.classList.add('fade-in');

        // Dopo 1 secondo appare il logo
        setTimeout(() => {
            logoContainer.classList.remove('hidden');
            logoContainer.classList.add('fade-in');

            // Dopo altri 3 secondi appaiono i bottoni del menu
            setTimeout(() => {
                buttonContainer.classList.remove('hidden');
                buttonContainer.classList.add('fade-in');
            }, 3000);
        }, 1000);
    }

</script>

</body>
</html>
